<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title></title>
<meta name="author" content="Bryan Neil Jones"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/aspen-red.css" id="theme"/>

</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-background="./images/aspen-background.png"><h2>Aspen Browse Categories As Digital Signage</h2></br><h3>AspenCon 2023</h3><h6>Bryan Neil Jones</h6><h6>Nashville Public Library</h6>
</section>
<section>
<section id="slide-org52b653d" data-background="./images/aspen-background.png">
<h2 id="org52b653d">Custom Javascript</h2>
<ul>
<li class="fragment fade-left">Q: How to make Browse Categories automatically move</li>
<li class="fragment fade-left">A: James Staub's <a href="https://docs.google.com/document/d/1M-mUy-G2Y8oI_AnwW4u9DrWyOyr3yBDmBRh4BaM9jnU">custom JavaScript</a></li>

</ul>
<aside class="notes">
<p>
The old software displayed covers as an animated scroll. We had to figure out a way for the Browse Categories move on their own. James Staub, our senior systems librarian, wrote a JavaScript snippet to automate the rotation of Browse Categories. The snippet causes the current Category to advance to the next Category after twenty seconds and refresh the page after reaching the last Category in the Group. The last part is very important because this is what enables staff to make changes from their workstations without have to touch the hardware itself which is difficult to access. When the page refreshes, their changes appear. The snippet: 
</p>

</aside>
</section>
<section id="slide-orga01f4e4" data-background="./images/aspen-background.png">
<h3 id="orga01f4e4">Move to next category after X seconds</h3>
<div class="org-src-container">

<pre  class="fragment (t)"   ><code trim>&lt;script&gt;

<span style="color: #4d9391;">if</span> (location.pathname == <span style="color: #6fb593;">'/'</span>) {
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">reloadURL</span> = window.location.href;
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">rotateTime</span> = 20000;
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">rotateCount</span> = 0;
        <span style="color: #4d9391;">function</span> <span style="color: #80bcb6;">rotateCategory</span>() {
                <span style="color: #4d9391;">var</span> <span style="color: #787096;">bccount</span> = $(<span style="color: #6fb593;">'.jcarousel'</span>).jcarousel(<span style="color: #6fb593;">'items'</span>).length;
                <span style="color: #4d9391;">var</span> <span style="color: #787096;">nextCategory</span> = <span style="color: #ab98b5;">null</span>;                
                nextCategory = $(<span style="color: #6fb593;">'[data-category-id='</span>+AspenDiscovery.Browse.curCategory+<span style="color: #6fb593;">']'</span>).next().attr(<span style="color: #6fb593;">'data-category-id'</span>);
                <span style="color: #4d9391;">if</span> (!nextCategory || rotateCount &gt;= bccount - 1 ) { 
                        window.location.href = reloadURL;
                }
                rotateCount++;
                AspenDiscovery.Browse.changeBrowseCategory(nextCategory);
        }

        setTimeout(
                <span style="color: #4d9391;">function</span> <span style="color: #80bcb6;">waitForIt</span>(){
                        <span style="color: #4d9391;">if</span>(<span style="color: #4d9391;">typeof</span> AspenDiscovery.Browse.curCategory !== <span style="color: #6fb593;">"undefined"</span>){
                                setInterval(rotateCategory,rotateTime)
                        }<span style="color: #4d9391;">else</span>{
                                setTimeout(waitForIt,250)
                        }
                },750);
}

&lt;/script&gt;
</code></pre>
</div>
</section>
<section id="slide-orgc5e27a2" data-background="./images/aspen-background.png">
<h3 id="orgc5e27a2">Custom Javascript</h3>
<ul>
<li class="fragment fade-left">Refresh when getting the last Category</li>

</ul>
<div class="org-src-container">

<pre  class="src src-javascript"   ><code trim>&lt;script&gt;

<span style="color: #4d9391;">if</span> (location.pathname == <span style="color: #6fb593;">'/'</span>) {
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">reloadURL</span> = window.location.href;
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">rotateTime</span> = 20000;
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">rotateCount</span> = 0;
        <span style="color: #4d9391;">function</span> <span style="color: #80bcb6;">rotateCategory</span>() {
                <span style="color: #4d9391;">var</span> <span style="color: #787096;">bccount</span> = $(<span style="color: #6fb593;">'.jcarousel'</span>).jcarousel(<span style="color: #6fb593;">'items'</span>).length;
                <span style="color: #4d9391;">var</span> <span style="color: #787096;">nextCategory</span> = <span style="color: #ab98b5;">null</span>;                
                nextCategory = $(<span style="color: #6fb593;">'[data-category-id='</span>+AspenDiscovery.Browse.curCategory+<span style="color: #6fb593;">']'</span>).next().attr(<span style="color: #6fb593;">'data-category-id'</span>);
                <span style="color: #4d9391;">if</span> (!nextCategory || rotateCount &gt;= bccount - 1 ) { 
                        window.location.href = reloadURL;
                }
                rotateCount++;
                AspenDiscovery.Browse.changeBrowseCategory(nextCategory);
        }

        setTimeout(
                <span style="color: #4d9391;">function</span> <span style="color: #80bcb6;">waitForIt</span>(){
                        <span style="color: #4d9391;">if</span>(<span style="color: #4d9391;">typeof</span> AspenDiscovery.Browse.curCategory !== <span style="color: #6fb593;">"undefined"</span>){
                                setInterval(rotateCategory,rotateTime)
                        }<span style="color: #4d9391;">else</span>{
                                setTimeout(waitForIt,250)
                        }
                },750);
}
&lt;/script&gt;
</code></pre>
</div>
</section>
<section id="slide-orgb8ee467" data-background="./images/aspen-background.png">
<h3 id="orgb8ee467">Custom JavaScript</h3>
<div class="org-src-container">

<pre  class="fragment (t)"   ><code trim>&lt;script&gt;

<span style="color: #4d9391;">if</span> (location.pathname == <span style="color: #6fb593;">'/'</span>) {
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">reloadURL</span> = window.location.href;
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">rotateTime</span> = 20000;
        <span style="color: #4d9391;">var</span> <span style="color: #787096;">rotateCount</span> = 0;
        <span style="color: #4d9391;">function</span> <span style="color: #80bcb6;">rotateCategory</span>() {
                <span style="color: #4d9391;">var</span> <span style="color: #787096;">bccount</span> = $(<span style="color: #6fb593;">'.jcarousel'</span>).jcarousel(<span style="color: #6fb593;">'items'</span>).length;
                <span style="color: #4d9391;">var</span> <span style="color: #787096;">nextCategory</span> = <span style="color: #ab98b5;">null</span>;                
                nextCategory = $(<span style="color: #6fb593;">'[data-category-id='</span>+AspenDiscovery.Browse.curCategory+<span style="color: #6fb593;">']'</span>).next().attr(<span style="color: #6fb593;">'data-category-id'</span>);
                <span style="color: #4d9391;">if</span> (!nextCategory || rotateCount &gt;= bccount - 1 ) { 
                        window.location.href = reloadURL;
                }
                rotateCount++;
                AspenDiscovery.Browse.changeBrowseCategory(nextCategory);
        }

        setTimeout(
                <span style="color: #4d9391;">function</span> <span style="color: #80bcb6;">waitForIt</span>(){
                        <span style="color: #4d9391;">if</span>(<span style="color: #4d9391;">typeof</span> AspenDiscovery.Browse.curCategory !== <span style="color: #6fb593;">"undefined"</span>){
                                setInterval(rotateCategory,rotateTime)
                        }<span style="color: #4d9391;">else</span>{
                                setTimeout(waitForIt,250)
                        }
                },750);
}
&lt;/script&gt;
</code></pre>
</div>
</section>
</section>
</div>
</div>
<script src="./reveal.js/dist/reveal.js"></script>
<script src="./reveal.js/plugin/markdown/markdown.js"></script>
<script src="./reveal.js/plugin/notes/notes.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealMarkdown, RevealNotes]
});

</script>
</body>
</html>
